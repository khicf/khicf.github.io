# Plan for 2025-08-19

This document outlines the plan for the four requested features.

## 1. Prayer Wall Enhancements (DONE)

### Objective

Make the prayer wall public while allowing users to control the visibility of their individual prayer requests.

### Plan

1. **Make Prayer Page Public:**
    * Remove the authentication check for the `/prayer` page to make it accessible to all visitors.
2. **Add Visibility Control:**
    * Add a `isPublic` boolean field to the `Prayer` model in `prisma/schema.prisma`. Default to `true`.
    * Update the prayer submission form to include a checkbox or toggle switch allowing users to mark their prayer as "private" (i.e., only visible to logged-in users).
    * Modify the API route for creating prayers (`app/api/prayers/route.js`) to handle the new `isPublic` field.
3. **Update Prayer Wall Logic:**
    * In the `/prayer` page, fetch all public prayers.
    * If a user is logged in, fetch both public and private prayers.
    * Display a clear indicator (e.g., an icon) next to private prayers to distinguish them.

## 2. Event Calendar View (TODO, button not working)

### Objective

Provide a calendar view for events in addition to the existing list view.

### Plan

1. **Choose a Calendar Library:**
    * Research and select a suitable React calendar library (e.g., `react-big-calendar`, `fullcalendar-react`).
2. **Implement Calendar View:**
    * Install the chosen library.
    * Create a new component for the calendar view.
    * Fetch all events and format them as required by the calendar library.
    * Add the calendar component to the `/events` page.
3. **Add View Toggle:**
    * Implement a toggle switch or buttons on the `/events` page to allow users to switch between the list view and the calendar view.

## 3. User Signup Approval System (DONE)

### Objective

Require admin approval for all new user signups.

### Plan

1. **Update User Model:**
    * Add an `approved` boolean field to the `User` model in `prisma/schema.prisma`. Default to `false`.
2. **Modify Signup Process:**
    * When a user signs up, create the user with `approved: false`.
    * After signup, redirect the user to a page informing them that their account is pending approval.
3. **Create Admin Approval Interface:**
    * In the admin panel (`/admin/users`), create a new section to display a list of unapproved users.
    * Add "Approve" and "Deny" buttons for each unapproved user.
4. **Implement Approval/Denial Logic:**
    * Create new API routes to handle approving and denying users.
    * The "Approve" button will set the user's `approved` field to `true`.
    * The "Deny" button will delete the user from the database.
5. **Update Login Process:**
    * Modify the login logic to only allow users with `approved: true` to log in.

## 4. Scripture API Integration

### Objective

Integrate a Bible verse API to display scripture content when users are sharing.

### Plan

1. **Research Bible APIs:**
    * Search for and evaluate open-source Bible APIs. Key factors will be ease of use, documentation, and terms of service. Some potential candidates are the [ESV API](https://api.esv.org/) or [Bible API](https://bible-api.com/).
2. **Integrate the API:**
    * On the scripture sharing page, add input fields for the user to enter the book, chapter, and verse.
    * When the user fills in the reference, make a request to the chosen Bible API.
3. **Display Scripture Content:**
    * Display the fetched Bible verse content in a designated area on the page.
    * Allow the user to confirm that this is the scripture they want to share before submitting.
